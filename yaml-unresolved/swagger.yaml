openapi: 3.0.0
info:
  version: '0.1.0'
  title: 'DCSA.org Interface Track Standards Open Api Specification'
  description: 'Open Api Specification for the DCSA Interface Tracking Standards'
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  contact:
    name: Digital Container Shipping Association (DCSA)
    url: https://dcsa.org
    email: info@dcsa.org
tags:
  - name: Shipments
    description: Shipment operations
  - name: Transports
    description: Transport operations
  - name: Equipments
    description: Equipment operations
paths:
  /shipments/{bookingReference}:
    get:
      tags:
        - Shipments
      summary: Find shipment by Booking Reference
      description: Returns a single shipment
      parameters:
        - name: bookingReference
          in: path
          description: Booking Reference of shipment to return
          required: true
          schema:
            $ref: '#/components/schemas/bookingReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/metadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/metadata'
        '400':
          description: Invalid Booking Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Booking Reference not found
  /shipments/billOfLadingNumber={billOfLadingNumber}:
    get:
      tags:
        - Shipments
      summary: Find shipment by Bill of Lading
      description: Returns a single shipment
      parameters:
        - name: billOfLadingNumber
          in: path
          description: Bill of Lading of shipment to return
          required: true
          schema:
            $ref: '#/components/schemas/billOfLadingNumber'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/metadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/metadata'
        '400':
          description: Invalid Booking Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Booking Reference not found
  /shipments/{bookingReference}/events:
    get:
      tags:
        - Shipments
      summary: Find events by Booking Reference
      description: Returns all events of a single shipment
      parameters:
        - in: path
          name: bookingReference
          description: Booking Reference of shipment to return
          required: true
          schema:
            $ref: '#/components/schemas/bookingReference'
        - in: query
          name: equipmentReference
          description: Equipment Reference of equipment to filter events by
          required: false
          schema:
            $ref: '#/components/schemas/equipmentReference'
        - in: query
          name: transportReference
          description: Transport Reference of transport to filter events by
          required: false
          schema:
            $ref: '#/components/schemas/transportReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/events'
                  - $ref: '#/components/schemas/metadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/events'
                  - $ref: '#/components/schemas/metadata'
        '400':
          description: Invalid Booking Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Booking Reference not found
  /transports/{transportReference}:
    get:
      tags:
        - Transports
      summary: Find transports by Transport Reference
      description: Returns a single transport
      parameters:
      - name: transportReference
        in: path
        description: Transport Reference of transport to return
        required: true
        schema:
          $ref: '#/components/schemas/transportReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/transport'
                  - $ref: '#/components/schemas/metadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/transport'
                  - $ref: '#/components/schemas/metadata'
        '400':
          description: Invalid Transport Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Transport Reference not found
  /equipments/{equipmentReference}:
    get:
      tags:
        - Equipments
      summary: Find equipments by Equipment Reference
      description: returns a single equipment
      parameters:
      - name: equipmentReference
        in: path
        description: Equipment Reference of equipment to return
        required: true
        schema:
         $ref: '#/components/schemas/equipmentReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipment'
                  - $ref: '#/components/schemas/metadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipment'
                  - $ref: '#/components/schemas/metadata'
        '400':
          description: Invalid Equipment Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Equipment Reference not found
  /equipments/{equipmentReference}/activeShipmentEvents:
    get:
      tags:
        - Equipments
      summary: Find active shipment events related to Equipment Reference
      description: Returns a list of active events for a single equipment
      parameters:
      - name: equipmentReference
        in: path
        description: Equipment Reference of the active events to return
        required: true
        schema:
          $ref: '#/components/schemas/equipmentReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipmentEvents'
                  - $ref: '#/components/schemas/metadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipmentEvents'
                  - $ref: '#/components/schemas/metadata'
        '400':
          description: Invalid Equipment Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Equipment Reference not found
components:
  schemas:
    shipment:
      description: The shipment entity is a reference entity that describes a shipment in the context of tracking of shipments.
      type: object
      properties:
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        billOfLadingNumber:
          $ref: '#/components/schemas/billOfLadingNumber'
        bookingDateTime:
          $ref: '#/components/schemas/bookingDateTime'
        carrierCode:
          $ref: '#/components/schemas/carrierCode'
        shipperName:
          $ref: '#/components/schemas/shipperName'
        consigneeName:
          $ref: '#/components/schemas/consigneeName'
        collectionOrigin:
          $ref: '#/components/schemas/collectionOrigin'
        collectionDateTime:
          $ref: '#/components/schemas/collectionDateTime'
        deliveryDestination:
          $ref: '#/components/schemas/deliveryDestination'
        deliveryDateTime:
          $ref: '#/components/schemas/deliveryDateTime'
        estimatedArrivalDateTime:
          $ref: '#/components/schemas/estimatedArrivalDateTime'
        eventsLink:
          $ref: '#/components/schemas/eventsLink'
      required:
        - bookingReference
        - bookingDateTime
        - carrierCode
        - collectionOrigin
        - collectionDateTime
        - deliveryDestination
        - deliveryDateTime
        - events
    transport:
      type: object
      description: The transport entity is a reference entity that describes a transport in the context of tracking of shipments. An event can contain a reference to the transport entity if it is of the appropriate event category.
      properties:
        transportReference:
          $ref: '#/components/schemas/transportReference'
        modeOfTransportCode:
          $ref: '#/components/schemas/modeOfTransportCode'
        transportLegReference:
          $ref: '#/components/schemas/transportLegReference'
        transportName:
          $ref: '#/components/schemas/transportName'
      required:
          - transportReference
          - modeOfTransportCode
          - transportLegReference
          - transportName
    equipment:
      type: object
      description: The equipment entity is a reference entity that describes an equipment in the context of tracking of shipments. An event can contain a reference to the equipment entity if it is of the appropriate event category.
      properties:
        equipmentReference:
          $ref: '#/components/schemas/equipmentReference'
        ISOEquipmentCode:
          $ref: '#/components/schemas/ISOEquipmentCode'
        ActiveShipmentBookingReference:
          $ref: '#/components/schemas/ActiveShipmentBookingReference'
      required:
        - equipmentReference
        - ISOEquipmentCode
    event:
      description: The event entity is described as a generalization of all the specific event categories. An event always takes place in relation to a shipment and can additionally be linked to a transport or an equipment
      type: object
      properties:
        eventID:
          $ref: '#/components/schemas/eventID'
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        eventDateTime:
          $ref: '#/components/schemas/eventDateTime'
        eventClassifierCode:
          $ref: '#/components/schemas/eventClassifierCode'
        eventTypeCode:
          $ref: '#/components/schemas/eventTypeCode'
      required:
        - eventID
        - bookingReference
        - eventDateTime
        - eventClassifierCode
        - eventTypeCode
    shipmentEvent:
      description: The shipment event entity is a specialization of the event entity to support specification of data that only applies to a shipment event.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            informationTypeCode:
              $ref: '#/components/schemas/informationTypeCode'
          required:
            - informationTypeCode
    transportEvent:
      description: The transport event entity is a specialization of the event entity to support specification of data that only applies to a transport event.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            transportReference:
              $ref: '#/components/schemas/transportReference'
            transportLegReference:
              $ref: '#/components/schemas/transportLegReference'
            facilityType:
              $ref: '#/components/schemas/facilityType'
            UNLocationCode:
              $ref: '#/components/schemas/UNLocationCode'
            facilityCode:
              $ref: '#/components/schemas/facilityCode'
            otherFacility:
              $ref: '#/components/schemas/otherFacility'
            transportLink:
              $ref: '#/components/schemas/transportLink'
          required:
            - transportReference
            - transportLegReference
            - facilityType
            - UNLocationCode
            - facilityCode
    equipmentEvent:
      description: The equipment event entity is a specialization of the event entity to support specification of data that only applies to an equipment event.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            equipmentReference:
              $ref: '#/components/schemas/equipmentReference'
            facilityType:
              $ref: '#/components/schemas/facilityType'
            UNLocationCode:
              $ref: '#/components/schemas/UNLocationCode'
            facilityCode:
              $ref: '#/components/schemas/facilityCode'
            otherFacility:
              $ref: '#/components/schemas/otherFacility'
            emptyIndicatorCode:
              $ref: '#/components/schemas/emptyIndicatorCode'
            equipmentLink:
              $ref: '#/components/schemas/equipmentLink'
          required:
            - equipmentReference
            - facilityType
            - UNLocationCode
            - facilityCode
            - emptyIndicatorCode
    transportEquipmentEvent:
      description: The transport equipment event entity is a specialization of the event entity to support specification of data that applies to both transport and equipment events.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            transportReference:
              $ref: '#/components/schemas/transportReference'
            transportLegReference:
              $ref: '#/components/schemas/transportLegReference'
            equipmentReference:
              $ref: '#/components/schemas/equipmentReference'
            facilityType:
              $ref: '#/components/schemas/facilityType'
            UNLocationCode:
              $ref: '#/components/schemas/UNLocationCode'
            facilityCode:
              $ref: '#/components/schemas/facilityCode'
            otherFacility:
              $ref: '#/components/schemas/otherFacility'
            emptyIndicatorCode:
              $ref: '#/components/schemas/emptyIndicatorCode'
            transportLink:
              $ref: '#/components/schemas/transportLink'
            equipmentLink:
              $ref: '#/components/schemas/equipmentLink'
          required:
            - transportReference
            - transportLegReference
            - equipmentReference
            - facilityType
            - UNLocationCode
            - facilityCode
            - emptyIndicatorCode
    events:
      type: object
      description: List of all events for the shipment journey.
      properties:
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        shipmentLink:
          $ref: '#/components/schemas/shipmentLink'
        events:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/transportEvent'
              - $ref: '#/components/schemas/shipmentEvent'
              - $ref: '#/components/schemas/equipmentEvent'
              - $ref: '#/components/schemas/transportEquipmentEvent'
            discriminator:
              propertyName: event
      required:
        - bookingReference
        - events
    equipmentEvents:
      description: List of all equipment-related events for the shipment journey.
      type: object
      properties:
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        shipmentLink:
          $ref: '#/components/schemas/shipmentLink'
        events:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/equipmentEvent'
              - $ref: '#/components/schemas/transportEquipmentEvent'
            discriminator:
              propertyName: event
      required:
        - bookingReference
        - events
    metadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /shipments/ABC709951
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
####String variables below
    bookingReference:
      type: string
      example: ABC709951
      description: The unique identifier for a Shipment, which is issued by the carrier. The booking reference must be unique across the entire shipping industry.
    transportReference:
      type: string
      example: 9648714
      description: The particular transport that the shipment relates to. The reference for the transport where the equipment will be loaded onto. In the case of a Vessel, this will be the Vessel IMO Number.
    equipmentReference:
      type: string
      example: ZCSU2785124
      description: The unique identifier for the equipment. Made up of the equipment prefix and the equipment number. Usually follows the ISO 6346 standard.
    billOfLadingNumber:
      type: string
      example: ABCD421911263977
      description: |
        The bill of lading number.
        UN/EDIFACT 1001 Document name code (UNTDD00A)
        1001 = 705 Bill of lading
        Negotiable document/message which evidences a contract of carriage by sea and the taking over or loading of goods by carrier, and by which carrier undertakes to deliver goods against surrender of the document. A provision in the document that goods are to be delivered to the order of a named person, or to order, or to bearer, constitutes such an undertaking.
    facilityType:
      type: string
      example: POTE
      description: Facility Types, four characters to define the specific type of facility.
    UNLocationCode:
      type: string
      example: USNYC
      description: UN Location Code identifies a location in the sense of a city / a town / a village, being the smaller administrative area existing as defined by the competent national authority in each country. A complete UN/LOCODE is a combination of a 2-character country code and a 3-character area code.
    facilityCode:
      type: string
      example: AEAUHADT
      description: The unique code used for identifying the specific facility. Up to 10 characters, including the five characters from the UN/LOCODE. Unknown value possible.
    otherFacility:
      type: string
      example: Depot location or address
      description: The location when a DCSA standardized facility code is not available.
    emptyIndicatorCode:
      type: string
      example: Empty
      description: The classifier of the equipment as to whether is empty or laden. These are the only two values that are tracked.
    informationTypeCode:
      type: string
      example: Shipment Release Message Issued
      description: The code to identify the type of information that is related to the Shipment.
    ISOEquipmentCode:
      type: string
      example: 10G0
      description: |
        Unique Code for the different container "size/type" used for transporting commodities.
        (IFSTA) Different container "size/type" used for transporting commodities. The most common equipment size/type is 20'/40' Dry Freight Container, but a number of different versions exists.
    ActiveShipmentBookingReference:
      type: string
      example: ABC709951
      description: Booking reference of the active shipment that the equipment is currently allocated to.
    modeOfTransportCode:
      type: string
      example: 1
      description: A code specifying a type of transport mode.
    transportLegReference:
      type: string
      example: 3
      description: |
        The reference will be specific per mode of transport:
        - Vessel: Voyage number (10 characters) as specified by the Vessel Operator
        - Truck: None specified, for release 1
        - Rail: None specified, for release 1
        - Barge: None specified, for release 1
    transportName:
      type: string
      example: CARX VESSEL
      description: The actual name of the vessel. Transport names do not change depending on the operator of the vessel. Follows the vessel registration and mortgage recording procedures of the Republic of the Marshall Islands (RMI).
    eventDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: Event DateTime in the format “YYYY-MM-DDTHH:MM:SSZHH:MM”.
    eventID:
      type: string
      example: 1
      description: Equipment Event ID/Transport Event ID/Shipment Event ID.
    eventClassifierCode:
      type: string
      example: ACT
      description: Event Classifier Code (Planned, Estimated or Actual).
    eventTypeCode:
      type: string
      example: ARRI
      description: Unique identifier for Event Type Code.
    bookingDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: Booking Date Time in the format “YYYY-MM-DDTHH:MM:SSZHH:MM”.
    carrierCode:
      type: string
      example: CARX
      description: The unique carrier identifier as set by the National Motor Freight Traffic Association (NMFTA).
    shipperName:
      type: string
      example: Computer Corp.
      description: The name of the shipper party.
    consigneeName:
      type: string
      example: Computer Corp.
      description: The name of the consignee.
    collectionOrigin:
      type: string
      example: USNYC
      description: The customer (shipper) needs to place a booking in order to ship the cargo (commodity) from an origin to destination. This attribute specifies the location of the origin.
    deliveryDestination:
      type: string
      example: USNYC
      description: |
        The customer (shipper) needs to place a booking in order to ship the cargo (commodity) from an origin to destination. This attribute specifies the location of the destination.
        aka - 'place of carrier delivery'.
    collectionDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: Collection DateTime in the format “YYYY-MM-DDTHH:MM:SSZHH:MM”.
    deliveryDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: Delivery DateTime in the format “YYYY-MM-DDTHH:MM:SSZHH:MM”.
    estimatedArrivalDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: Calculated estimated date and time for a shipment based on estimated and planned events for that same shipment in the format “YYYY-MM-DDTHH:MM:SSZHH:MM”.
    eventsLink:
      type: string
      pattern: /shipments/[A-z0-9-%]+/events
      example: /shipments/ABC709951/events
      description: A relative url to the events for the booking reference
    transportLink:
      type: string
      pattern: /transports/[A-z0-9-%]+
      example: /transports/9648714
      description: A relative URL to the transport for the transport reference
    equipmentLink:
      type: string
      pattern: /equipments/[A-z0-9-%]+
      example: /equipments/ZCSU2785124
      description: A relative URL to the equipment for the equipment reference
    shipmentLink:
      type: string
      pattern: /shipments/[A-z0-9-%]+
      example: /shipments/ABC709951
      description: A relative URL to the shipment for the booking reference