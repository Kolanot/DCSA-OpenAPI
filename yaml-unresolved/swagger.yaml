openapi: 3.0.0
info:
  version: '0.1.0'
  title: 'DCSA.org Interface Track Standards Open Api Specification'
  description: 'Open Api Specification for the DCSA Interface Tracking Standards'
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  contact:
    name: Digital Container Shipping Association (DCSA)
    url: https://dcsa.org
    email: info@dcsa.org
tags:
  - name: Shipments
    description: Shipment operations
  - name: Transports
    description: Transport operations
  - name: Equipments
    description: Equipment operations
paths:
  /shipments/{bookingReference}:
    get:
      tags:
        - Shipments
      summary: Find shipment by Booking Reference
      description: Returns a single shipment
      parameters:
        - name: bookingReference
          in: path
          description: Booking Reference of shipment to return
          required: true
          schema:
            $ref: '#/components/schemas/bookingReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/shipmentsMetadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/shipmentsMetadata'
        '400':
          description: Invalid Booking Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Booking Reference not found
  /shipments/billOfLadingNumber={billOfLadingNumber}:
    get:
      tags:
        - Shipments
      summary: Find shipment by Bill of Lading
      description: Returns a single shipment
      parameters:
        - name: billOfLadingNumber
          in: path
          description: Bill of Lading of shipment to return
          required: true
          schema:
            $ref: '#/components/schemas/billOfLadingNumber'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/billOfLadingMetadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/shipment'
                  - $ref: '#/components/schemas/billOfLadingMetadata'
        '400':
          description: Invalid Booking Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Booking Reference not found
  /shipments/{bookingReference}/events:
    get:
      tags:
        - Shipments
      summary: Find events by Booking Reference
      description: Returns all events of a single shipment
      parameters:
        - in: path
          name: bookingReference
          description: Booking Reference of shipment to return
          required: true
          schema:
            $ref: '#/components/schemas/bookingReference'
        - in: query
          name: equipmentReference
          description: Equipment Reference of equipment to filter events by
          required: false
          schema:
            $ref: '#/components/schemas/equipmentReference'
        - in: query
          name: transportReference
          description: Transport Reference of transport to filter events by
          required: false
          schema:
            $ref: '#/components/schemas/transportReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/events'
                  - $ref: '#/components/schemas/shipmentsEventsMetadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/events'
                  - $ref: '#/components/schemas/shipmentsEventsMetadata'
        '400':
          description: Invalid Booking Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Booking Reference not found
  /transports/{transportReference}:
    get:
      tags:
        - Transports
      summary: Find transports by Transport Reference
      description: Returns a single transport
      parameters:
      - name: transportReference
        in: path
        description: Transport Reference of transport to return
        required: true
        schema:
          $ref: '#/components/schemas/transportReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/transport'
                  - $ref: '#/components/schemas/transportsMetadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/transport'
                  - $ref: '#/components/schemas/transportsMetadata'
        '400':
          description: Invalid Transport Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Transport Reference not found
  /equipments/{equipmentReference}:
    get:
      tags:
        - Equipments
      summary: Find equipments by Equipment Reference
      description: returns a single equipment
      parameters:
      - name: equipmentReference
        in: path
        description: Equipment Reference of equipment to return
        required: true
        schema:
         $ref: '#/components/schemas/equipmentReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipment'
                  - $ref: '#/components/schemas/equipmentsMetadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipment'
                  - $ref: '#/components/schemas/equipmentsMetadata'
        '400':
          description: Invalid Equipment Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Equipment Reference not found
  /equipments/{equipmentReference}/activeShipmentEvents:
    get:
      tags:
        - Equipments
      summary: Find active shipment events related to Equipment Reference
      description: Returns a list of active events for a single equipment
      parameters:
      - name: equipmentReference
        in: path
        description: Equipment Reference of the active events to return
        required: true
        schema:
          $ref: '#/components/schemas/equipmentReference'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipmentEvents'
                  - $ref: '#/components/schemas/equipmentsEventsMetadata'
            application/xml:
              schema:
                allOf:
                  - $ref: '#/components/schemas/equipmentEvents'
                  - $ref: '#/components/schemas/equipmentsEventsMetadata'

        '400':
          description: Invalid Equipment Reference supplied
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Equipment Reference not found
components:
  schemas:
    shipment:
      description: The shipment entity is a reference entity that describes a shipment in the context of tracking of shipments.
      type: object
      properties:
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        billOfLadingNumber:
          $ref: '#/components/schemas/billOfLadingNumber'
        bookingDateTime:
          $ref: '#/components/schemas/bookingDateTime'
        carrierCode:
          $ref: '#/components/schemas/carrierCode'
        shipperName:
          $ref: '#/components/schemas/shipperName'
        consigneeName:
          $ref: '#/components/schemas/consigneeName'
        collectionOrigin:
          $ref: '#/components/schemas/collectionOrigin'
        collectionDateTime:
          $ref: '#/components/schemas/collectionDateTime'
        deliveryDestination:
          $ref: '#/components/schemas/deliveryDestination'
        deliveryDateTime:
          $ref: '#/components/schemas/deliveryDateTime'
        estimatedArrivalDateTime:
          $ref: '#/components/schemas/estimatedArrivalDateTime'
        eventsLink:
          $ref: '#/components/schemas/eventsLink'
      required:
        - bookingReference
        - bookingDateTime
        - carrierCode
        - collectionOrigin
        - collectionDateTime
        - deliveryDestination
        - deliveryDateTime
        - events
    transport:
      type: object
      description: The transport entity is a reference entity that describes a transport in the context of tracking of shipments. An event can contain a reference to the transport entity if it is of the appropriate event category.
      properties:
        transportReference:
          $ref: '#/components/schemas/transportReference'
        modeOfTransportCode:
          $ref: '#/components/schemas/modeOfTransportCode'
        transportLegReference:
          $ref: '#/components/schemas/transportLegReference'
        transportName:
          $ref: '#/components/schemas/transportName'
      required:
          - transportReference
          - modeOfTransportCode
          - transportLegReference
          - transportName
    equipment:
      type: object
      description: The equipment entity is a reference entity that describes an equipment in the context of tracking of shipments. An event can contain a reference to the equipment entity if it is of the appropriate event category.
      properties:
        equipmentReference:
          $ref: '#/components/schemas/equipmentReference'
        ISOEquipmentCode:
          $ref: '#/components/schemas/ISOEquipmentCode'
        ActiveShipmentBookingReference:
          $ref: '#/components/schemas/ActiveShipmentBookingReference'
      required:
        - equipmentReference
        - ISOEquipmentCode
    event:
      description: The event entity is described as a generalization of all the specific event categories. An event always takes place in relation to a shipment and can additionally be linked to a transport or an equipment
      type: object
      properties:
        eventID:
          $ref: '#/components/schemas/eventID'
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        eventDateTime:
          $ref: '#/components/schemas/eventDateTime'
        eventClassifierCode:
          $ref: '#/components/schemas/eventClassifierCode'
        eventTypeCode:
          $ref: '#/components/schemas/eventTypeCode'
      required:
        - eventID
        - bookingReference
        - eventDateTime
        - eventClassifierCode
        - eventTypeCode
    shipmentEvent:
      description: The shipment event entity is a specialization of the event entity to support specification of data that only applies to a shipment event.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            informationTypeCode:
              $ref: '#/components/schemas/informationTypeCode'
          required:
            - informationTypeCode
    transportEvent:
      description: The transport event entity is a specialization of the event entity to support specification of data that only applies to a transport event.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            transportReference:
              $ref: '#/components/schemas/transportReference'
            transportLegReference:
              $ref: '#/components/schemas/transportLegReference'
            facilityType:
              $ref: '#/components/schemas/facilityType'
            UNLocationCode:
              $ref: '#/components/schemas/UNLocationCode'
            facilityCode:
              $ref: '#/components/schemas/facilityCode'
            otherFacility:
              $ref: '#/components/schemas/otherFacility'
            transportLink:
              $ref: '#/components/schemas/transportLink'
          required:
            - transportReference
            - transportLegReference
            - facilityType
            - UNLocationCode
            - facilityCode
    equipmentEvent:
      description: The equipment event entity is a specialization of the event entity to support specification of data that only applies to an equipment event.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            equipmentReference:
              $ref: '#/components/schemas/equipmentReference'
            facilityType:
              $ref: '#/components/schemas/facilityType'
            UNLocationCode:
              $ref: '#/components/schemas/UNLocationCode'
            facilityCode:
              $ref: '#/components/schemas/facilityCode'
            otherFacility:
              $ref: '#/components/schemas/otherFacility'
            emptyIndicatorCode:
              $ref: '#/components/schemas/emptyIndicatorCode'
            equipmentLink:
              $ref: '#/components/schemas/equipmentLink'
          required:
            - equipmentReference
            - facilityType
            - UNLocationCode
            - facilityCode
            - emptyIndicatorCode
    transportEquipmentEvent:
      description: The transport equipment event entity is a specialization of the event entity to support specification of data that applies to both transport and equipment events.
      allOf:
        - $ref: '#/components/schemas/event'
        - type: object
          properties:
            transportReference:
              $ref: '#/components/schemas/transportReference'
            transportLegReference:
              $ref: '#/components/schemas/transportLegReference'
            equipmentReference:
              $ref: '#/components/schemas/equipmentReference'
            facilityType:
              $ref: '#/components/schemas/facilityType'
            UNLocationCode:
              $ref: '#/components/schemas/UNLocationCode'
            facilityCode:
              $ref: '#/components/schemas/facilityCode'
            otherFacility:
              $ref: '#/components/schemas/otherFacility'
            emptyIndicatorCode:
              $ref: '#/components/schemas/emptyIndicatorCode'
            transportLink:
              $ref: '#/components/schemas/transportLink'
            equipmentLink:
              $ref: '#/components/schemas/equipmentLink'
          required:
            - transportReference
            - transportLegReference
            - equipmentReference
            - facilityType
            - UNLocationCode
            - facilityCode
            - emptyIndicatorCode
    events:
      type: object
      description: List of events.
      properties:
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        shipmentLink:
          $ref: '#/components/schemas/shipmentLink'
        events:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/transportEvent'
              - $ref: '#/components/schemas/shipmentEvent'
              - $ref: '#/components/schemas/equipmentEvent'
              - $ref: '#/components/schemas/transportEquipmentEvent'
            discriminator:
              propertyName: event
      required:
        - bookingReference
        - events
    equipmentEvents:
      description: List of all equipment-related events for the shipment journey.
      type: object
      properties:
        bookingReference:
          $ref: '#/components/schemas/bookingReference'
        shipmentLink:
          $ref: '#/components/schemas/shipmentLink'
        events:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/equipmentEvent'
              - $ref: '#/components/schemas/transportEquipmentEvent'
            discriminator:
              propertyName: event
      required:
        - bookingReference
        - events
    transportsMetadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /transports/9648714
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
    shipmentsMetadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /shipments/ABC709951
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
    shipmentsEventsMetadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /shipments/ABC709951/events
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
    billOfLadingMetadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /shipments/billOfLadingNumber=ABC709951
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
    equipmentsMetadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /equipments/APZU4812090
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
    equipmentsEventsMetadata:
      type: object
      description: The metadata entity is an entity that describes the responses metadata.
      properties:
        metadata:
          type: object
          properties:
            dcsaVersion:
              type: string
              example: 1.0.0
              description: Version code, specifying the version of the implemented Open API Specification.
            self:
              type: string
              example: /equipments/ZCSU2785124/activeShipmentEvents
              description: Relative url of the current endpoint
          required:
            - dcsaVersion
            - self
      required:
        - metadata
####String variables below
    bookingReference:
      type: string
      example: ABC709951
      description: The unique identifier for a shipment.
    transportReference:
      type: string
      example: 9648714
      description: The reference for the transport that the shipment is related to.
    equipmentReference:
      type: string
      example: APZU4812090
      description: The unique identifier for the equipment.
    billOfLadingNumber:
      type: string
      example: ABCD421911263977
      description: Bill of Lading is the legal document issued to the customer.
    facilityType:
      type: string
      example: POTE
      description: The code to identify the specific type of facility.
    UNLocationCode:
      type: string
      example: USNYC
      description: UN Location Code identifies a location in the sense of a city / a town / a village.
    facilityCode:
      type: string
      example: AEAUHADT
      description: The code used for identifying the specific facility.
    otherFacility:
      type: string
      example: Depot location or address
      description: An alternative way to capture the facility when no standardized DCSA facility code can be found.
    emptyIndicatorCode:
      type: string
      example: Empty
      description: Code to denote whether the equipment is empty or not.
    informationTypeCode:
      type: string
      example: SRM
      description: The code to identify the type of information that is related to the shipment.
    ISOEquipmentCode:
      type: string
      example: 10G0
      description: Unique Code for the different container "size/type" used for transporting commodities
    ActiveShipmentBookingReference:
      type: string
      example: ABC709951
      description: Booking reference of the active shipment that the equipment is currently allocated to.
    modeOfTransportCode:
      type: string
      example: 1
      description: A code specifying a type of transport mode.
    transportLegReference:
      type: string
      example: 025E
      description: The reference specifying a single section of the complete transport of a shipment. For a vessel this will be the voyage number.
    transportName:
      type: string
      example: CARX VESSEL
      description: The actual name of the vessel.
    eventDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: The date and time that the event took place.
    eventID:
      type: string
      example: 1
      description: The unique identifier for the Equipment Event ID/Transport Event ID/Shipment Event ID.
    eventClassifierCode:
      type: string
      example: ACT
      description: Event Classifier Code (Planned, Estimated or Actual).
    eventTypeCode:
      type: string
      example: ARRI
      description: Unique identifier for Event Type Code.
    bookingDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: The time stamp of the booking request.
    carrierCode:
      type: string
      example: CARX
      description: A unique carrier identifier.
    shipperName:
      type: string
      example: Computer Corp.
      description: The name of the shipper, who requested the booking.
    consigneeName:
      type: string
      example: Computer Corp.
      description: The name of the consignee.
    collectionOrigin:
      type: string
      example: USNYC
      description: The customer (shipper) needs to place a booking in order to ship the cargo (commodity) from an origin to destination.
    deliveryDestination:
      type: string
      example: USNYC
      description: The customer (shipper) needs to place a booking in order to ship the cargo (commodity) from an origin to destination.
    collectionDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: The date and the time that the shipment items need to be collected from the origin.
    deliveryDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: The date (and when possible time) that the shipment items need to be delivered to the destination.
    estimatedArrivalDateTime:
      type: string
      format: date-time
      example: '2019-11-12T07:41:00+08:30'
      description: Calculated estimated date and time for a shipment based on estimated and planned events for that same shipment.
    eventsLink:
      type: string
      pattern: /shipments/[A-z0-9-%]+/events
      example: /shipments/ABC709951/events
      description: A relative url to the events for the booking reference
    transportLink:
      type: string
      pattern: /transports/[A-z0-9-%]+
      example: /transports/9648714
      description: A relative URL to the transport for the transport reference
    equipmentLink:
      type: string
      pattern: /equipments/[A-z0-9-%]+
      example: /equipments/APZU4812090
      description: A relative URL to the equipment for the equipment reference
    shipmentLink:
      type: string
      pattern: /shipments/[A-z0-9-%]+
      example: /shipments/ABC709951
      description: A relative URL to the shipment for the booking reference