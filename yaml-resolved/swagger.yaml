openapi: 3.0.0
info:
  title: DCSA.org Interface Track Standards Open Api Specification
  description: Open Api Specification for the DCSA Interface Tracking Standards
  version: 0.1.0
servers:
- url: /
tags:
- name: Shipments
  description: Shipment operations
- name: Transports
  description: Transport operations
- name: Equipments
  description: Equipment operations
paths:
  /shipments/{bookingReference}:
    get:
      tags:
      - Shipments
      summary: Find shipment by Booking Reference
      description: Returns a single shipment
      parameters:
      - name: bookingReference
        in: path
        description: Booking Reference of shipment to return
        required: true
        style: simple
        explode: false
        schema:
          type: string
          description: Equipment Event ID/Transport Event ID/Shipment Event ID
          example: YCH698840
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shipment'
            application/xml:
              schema:
                $ref: '#/components/schemas/shipment'
        "400":
          description: Invalid Booking Reference supplied
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Booking Reference not found
  /shipments/{bookingReference}/events:
    get:
      tags:
      - Shipments
      summary: Find events by Booking Reference
      description: Returns all events of a single shipment
      parameters:
      - name: bookingReference
        in: path
        description: Booking Reference of shipment to return
        required: true
        style: simple
        explode: false
        schema:
          type: string
          description: Equipment Event ID/Transport Event ID/Shipment Event ID
          example: YCH698840
      - name: equipmentReference
        in: query
        description: Equipment Reference of equipment to filter events by
        required: false
        style: form
        explode: true
        schema:
          type: string
          description: The unique identifier for the equipment
          example: EQ APZU4812090
      - name: transportReference
        in: query
        description: Transport Reference of transport to filter events by
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: "5"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/events'
            application/xml:
              schema:
                $ref: '#/components/schemas/events'
        "400":
          description: Invalid Booking Reference supplied
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Booking Reference not found
  /transports/{transportReference}:
    get:
      tags:
      - Transports
      summary: Find transports by Transport Reference
      description: Returns a single transport
      parameters:
      - name: transportReference
        in: path
        description: Transport Reference of transport to return
        required: true
        style: simple
        explode: false
        schema:
          type: string
          example: "5"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/transport'
            application/xml:
              schema:
                $ref: '#/components/schemas/transport'
        "400":
          description: Invalid Transport Reference supplied
        "404":
          description: Transport Reference not found
  /equipments/{equipmentReference}:
    get:
      tags:
      - Equipments
      summary: Find equipments by Equipment Reference
      description: returns a single equipment
      parameters:
      - name: equipmentReference
        in: path
        description: Equipment Reference of equipment to return
        required: true
        style: simple
        explode: false
        schema:
          type: string
          description: The unique identifier for the equipment
          example: EQ APZU4812090
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/equipment'
            application/xml:
              schema:
                $ref: '#/components/schemas/equipment'
        "400":
          description: Invalid Equipment Reference supplied
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Equipment Reference not found
components:
  schemas:
    shipment:
      type: object
      properties:
        bookingReference:
          type: string
          description: Booking Reference that uniquely identifies a shipment
          example: YCH698840
        billOfLadingNumber:
          type: string
          example: "855230418"
        bookingDateTime:
          type: string
          description: Booking Date Time, following the RFC3339 standard, in the format
            YYYY-MM-DDTHH:MM:SSZ
          format: date-time
        carrierCode:
          type: string
          example: MAEU
        shipperName:
          type: string
          example: Computer Corp.
        consigneeName:
          type: string
          example: ARI
        origin:
          type: string
          example: USNYC
        destination:
          type: string
          example: USNYC
        actualDeliveryDateTime:
          type: string
          description: Actual Delivery Date Time, following the RFC3339 standard,
            in the format YYYY-MM-DDTHH:MM:SSZ
          format: date-time
        eventsLink:
          pattern: /shipments/[A-z0-9-%]+/events
          type: string
          example: /shipments/YCH698840/events
    event:
      type: object
      properties:
        bookingReference:
          type: string
          description: Booking Reference that uniquely identifies a shipment
          example: YCH698840
        eventDateTime:
          type: string
          description: Event Date Time, following the RFC3339 standard, in the format
            YYYY-MM-DDTHH:MM:SSZ
          format: date-time
        eventID:
          type: string
          description: Equipment Event ID/Transport Event ID/Shipment Event ID
          example: "1"
        eventStatus:
          type: string
          description: Event Status Code (Planned, Estimated or Actual)
          example: ACT
        eventType:
          type: string
          description: Unique identifier for Event Type Code
          example: ARI
    transportEquipmentEvent:
      allOf:
      - $ref: '#/components/schemas/event'
      - type: object
        properties:
          equipmentReference:
            type: string
            description: The unique identifier for the equipment
            example: EQ APZU4812090
          transportReference:
            type: string
            description: The reference for the means of transport that will be used
              to transport the equipment
            example: "5"
          facilityType:
            type: string
            example: PT
          location:
            type: string
            description: Location code
            example: USNYC
          sublocation:
            type: string
            description: Event sublocation code
            example: AEJEADPWJA
          transportLink:
            pattern: /transports/[A-z0-9-%]+
            type: string
            example: /transports/5
          equipmentLink:
            pattern: /equipments/[A-z0-9-%]+
            type: string
            example: /equipments/EQ%20APZU4812090
    transportEvent:
      allOf:
      - $ref: '#/components/schemas/event'
      - type: object
        properties:
          transportReference:
            type: string
            description: The reference for the means of transport that will be used
              to transport the equipment
            example: "5"
          facilityType:
            type: string
            description: Facility Types, two characters to define the specific type
              of sublocation
            example: PT
          location:
            type: string
            example: USNYC
          sublocation:
            type: string
            example: AEJEADPWJA
          transportLink:
            pattern: /transports/[A-z0-9-%]+
            type: string
            example: /transports/5
    equipmentEvent:
      allOf:
      - $ref: '#/components/schemas/event'
      - type: object
        properties:
          equipmentReference:
            type: string
            description: The unique identifier for the equipment
            example: EQ APZU4812090
          emptyIndicator:
            type: boolean
            description: Status denoting whether the equipment is empty or not at
              the time of the event
            example: false
          equipmentLink:
            pattern: /equipments/[A-z0-9-%]+
            type: string
            example: /equipments/EQ%20APZU4812090
    shipmentEvent:
      allOf:
      - $ref: '#/components/schemas/event'
      - type: object
        properties:
          informationType:
            type: string
            description: The code to identify the type of information that is related
              to the Shipment
            example: Cargo Release Message Issued
    events:
      type: object
      properties:
        bookingReference:
          type: string
          description: Booking Reference that uniquely identifies a shipment
          example: YCH698840
        shipmentLink:
          pattern: /shipments/[A-z0-9-%]+
          type: string
          example: /shipments/YCH698840
        events:
          type: array
          items:
            discriminator:
              propertyName: event
            anyOf:
            - $ref: '#/components/schemas/transportEvent'
            - $ref: '#/components/schemas/shipmentEvent'
            - $ref: '#/components/schemas/equipmentEvent'
            - $ref: '#/components/schemas/transportEquipmentEvent'
    equipment:
      type: object
      properties:
        equipmentNumber:
          type: string
          description: '*MISSING DESCRIPTION* This attribute only exists in the class
            diagram at the moment'
          example: "17"
        equipmentType:
          type: string
          description: Unique Code for the different container "size/type" used for
            transporting commodities
          example: 10G0
    transport:
      type: object
      properties:
        meansOfTransport:
          type: string
          description: A code specifying a type of transport means
          example: "5"
        transportReference:
          type: string
          description: The reference for the means of transport that will be used
            to transport the equipment
          example: "5"
        vesselNumber:
          type: string
          description: The unique reference for a registered Vessel
          example: "9188403"
        voyageNumber:
          type: string
          description: The unique reference for the voyage as defined by the vessel
            operator
          example: "20"
